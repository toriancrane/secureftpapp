!function(e){var o={};function n(s){if(o[s])return o[s].exports;var r=o[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=o,n.d=function(e,o,s){n.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:s})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(o,"a",o),o},n.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},n.p="",n.w={},n(n.s=14)}([function(e,o){e.exports=require("express")},function(e,o){e.exports=require("amazon-cognito-identity-js")},function(e,o){e.exports=require("aws-sdk")},function(e,o){e.exports=require("node-fetch")},function(e,o,n){var s=n(0).Router();e.exports=s},function(e,o,n){var s=n(0).Router();s.get("/",function(e,o,n){o.render("folders")}),e.exports=s},function(e,o,n){var s=n(0),r=(s(),s.Router()),t=(n(2),n(1).CognitoUserPool,""),i="";r.get("/",function(e,o,n){t=e.session.userAttributes,i=e.session.cognitoUser,o.render("changepass")}),r.post("/",function(e,o){var n=e.body.new_password;console.log(n),i.completeNewPasswordChallenge(n,t),o.redirect("/folders")}),e.exports=r},function(e,o,n){var s=n(0).Router();e.exports=s},function(e,o,n){var s=n(0),r=(s(),s.Router()),t=n(2),i=n(1);i.CognitoUserPool;r.get("/",function(e,o,n){o.render("index",{title:"SecureFTP"})}),r.post("/",function(e,o){var n=e.body.username,s={Username:n,Password:e.body.password},r=new i.AuthenticationDetails(s),u={Username:n,Pool:new i.CognitoUserPool({UserPoolId:"us-west-2_sFuJmXBam",ClientId:"7v3io0egl88bujb261ecdjiubn"})},c=new i.CognitoUser(u);e.session.cognitoUser=c,c.authenticateUser(r,{onSuccess:function(e){t.config.region="us-west-2",t.config.credentials=new t.CognitoIdentityCredentials({IdentityPoolId:"us-west-2:e58465a5-5e9a-4842-a27d-693c5bde4553",Logins:{"cognito-idp.us-west-2.amazonaws.com/us-west-2_sFuJmXBam":e.getIdToken().getJwtToken()}}),t.config.credentials.refresh(e=>{e?console.error(e):(console.log("Successfully logged!"),o.redirect("/folders"))})},newPasswordRequired:function(n,s){delete n.email_verified,console.log(n),e.session.userAttributes=n,o.redirect("/changepass")},onFailure:function(e){console.log(e),console.log((new Error).stack)}})}),e.exports=r},function(e,o){e.exports=require("morgan")},function(e,o){e.exports=require("express-session")},function(e,o){e.exports=require("cookie-parser")},function(e,o){e.exports=require("path")},function(e,o){e.exports=require("http-errors")},function(e,o,n){(function(o){var s=n(13),r=n(0),t=n(12),i=n(11),u=n(10),c=n(9),a=n(8),l=n(7),d=n(6),f=n(5),p=n(4);global.fetch=n(3);var g=r();g.set("views",t.join(o,"views")),g.set("view engine","hbs"),g.use(c("dev")),g.use(r.json()),g.use(r.urlencoded({extended:!1})),g.use(i()),g.use(u({secret:"4562sdfgsfdg"})),g.use(r.static(t.join(o,"public"))),g.use("/",a),g.use("/signup",l),g.use("/folders",f),g.use("/changepass",d),g.use("/logout",p),g.use(function(e,o,n){n(s(404))}),g.use(function(e,o,n,s){n.locals.message=e.message,n.locals.error="development"===o.app.get("env")?e:{},n.status(e.status||500),n.render("error")}),e.exports=g}).call(this,"/")}]);